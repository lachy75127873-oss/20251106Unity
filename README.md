# 🎮 FirstPersonAdventure

> **내일배움캠프 Unity 트랙 개인 과제**  
> Unity 3D Practice, Sparta Dungeon 구현
> Unity 2022.3.62f2 / C# / JetBrains Rider
> 25/11/6 발제 ~ 25/11/13 마감

---

## 🧩 프로젝트 개요

**개발 목적**
- 1인칭 시점 캐릭터의 기본 조작 시스템 구현
- 동적 환경 조사 시스템 설계
- 인벤토리 및 아이템 구현
- 아이템 사용 / 장착 기능 개발
- 기본 UI(플레이어 상태, 인밴토리 등) 구현 

---

## 🧠 프로젝트 구조
UIManager, GameManager 중심의 싱글톤 구조 설계

---

## ⚙️ TroubleShooting  

1) 호출 순서 조정 문제로 인한 NullExceptionError

문제: 플레이어와 아이템 상호작용 후 UIManager가 이를 감지하여 정보를 참조해와야 하는 상황에서 참조가 제대로 이뤄지지 않고 에러 발생.

시도: 컴파일 에러가 없는 상황이었기 때문에, UIManager가 붙어있는 객체들의 인스팩터 설정을 점검하고, 디버깅을 시도함.
<img width="521" height="601" alt="스크린샷 2025-11-13 오후 2 47 58 복사본" src="https://github.com/user-attachments/assets/0007c74d-ac0e-4c26-af63-2f5c7c6ba8b1" />

원인 분석: 디버깅 후 조사 결과, 문제의 원인은 생명주기를 고려하지 않은 초기화 방식이었던 것으로 판명됨.
과제를 진행하면서 여러개의 매니저가 싱글톤으로 선언된 상태로, 한 씬에 존재하는 상황이 발생했고,
여러 객체들의 초기화 시점 (Awake,OnEnable, Start)이 뒤섞여 있었던 탓에 null을 참조하는 상황이 발생했던 것이었음.

해결: 로직의 동작 순서를 명확히 하고, 이에 따라서 초기화 순서를 조정함.
(플레이어 생성 -> 캐릭터 매니저 초기화 -> UI매니저에서 플레이어 관련 이벤트 구독 ...)
순서 정렬 방법으로는 Action을 사용한 등록 로직, 생명주기 순서(Awake-> OnEnable -> Start..) 를 이용함.



결론: 
싱글톤을 남용하지 않도록 주의한다. 
여러개의 싱글톤 선언 시 지배관계를 명확히 설정한다. 
생명주기를 고려한다.(특히, 초기화와 관련된 [ Awake-> OnEnable -> Start]은 게임 오브젝트가 씬에 로드되거나 인스턴스화될 때 호출됨을 기억.)


2) 인밴토리 UI 구현 방식 / 인밴토리 정보 갱신 방법과 타이밍

문제: 위와같은 참조 자체에 대한 문제와 더불어, UIManager가 아이템 정보를 갱신할 때마다 플레이어의 정보를 직접 참조해야 하는 방식이 비효율적이라 생각. 다른 방식을 고려함

시도 및 구성: 인벤토리를 열람할 때에는 플레이어의 정보를 참조하고, 그 외의 경우에는 UIManager 내부의 캐시 데이터를 참조하는 방식을 시도.
UIManager 내부에 Struct를 이용한 Dictionary를 캐시 데이터의 자료 형식으로 정함.
'인밴토리UI'가 켜지는 상황에서는 플레이어의 정보를 직접 참조해 UI를 구성.
그 외에 플레이어가 아이템과 상호작용만 하는 상황에서는 캐시를 갱신.(ex 인밴토리를 열고 아이템을 사용하거나 버리는 상황)

특이사항: gpt를 통해 구현방식을 고민하면서, 캐시 데이터에 대한 내용을 보고 캐시가 효율적이라는 직관은 있었지만
그 효과가 구체적으로 이해가 되지 않았음. 하지만 이는 이번 개인 프로젝트의 규모 때문에 생긴 오해였음.

결론: 
자잘한 정보를 갱신하는 경우에 struct를 활용한 캐시 데이터가 유용하게 사용될 수 있다.

---

## 🌱 실제 구현 내용
- 1인칭 시점 구현
- 플레이어 기본 이동(wasd / 방향키) 및 점프(space) 및 사다리 타기(좌클릭+방향키) 구현
- 플레이어 상태(체력, 스테미나, 스피드, 점프력..) 구현
- 아이템(소모/장착) 구현 및 상호작용(획득(E키)/사용하기/버리기/장착하기) 구현(사용효과는 일부만(hp 회복) 구현)
- 기본 정보 UI 구성(Exc키)
- 인밴토리 UI 구성(Tab키)
- 맵 배치

---

## 🌱 개선점
- 달리기 및 슈퍼점프 구현, 스테미너 소모 시스템 구현
- 데미지 시스템(낙하 데미지, 스테미너 부족 등) 구현
- 플레이어 기본 동작 및 사다리 타기, 점프대 애니메이션 추가
- 전반적인 UI 개선(인밴토리, 각종 효과 발생 시..)
- 맵 구성
- 각종 효과음


   

